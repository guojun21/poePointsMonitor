# 如何获取 Poe 配置信息

## 🎯 目标

从 Poe 网站获取以下配置信息，用于本工具拉取积分历史数据：

1. **Cookie** (必填)
2. **poe-formkey** (必填)
3. **poe-tchannel** (必填)
4. **poe-revision** (可选，有默认值)
5. **poe-tag-id** (可选，有默认值)

---

## 📖 详细步骤

### 第 1 步：打开 Poe 积分历史页面

在浏览器中访问：
```
https://poe.com/points_history
```

确保你已经登录到 Poe 账户。

---

### 第 2 步：打开浏览器开发者工具

根据你使用的浏览器：

#### Chrome / Edge / Brave
- **Windows/Linux**: 按 `F12` 或 `Ctrl + Shift + I`
- **macOS**: 按 `Cmd + Option + I`

#### Firefox
- **Windows/Linux**: 按 `F12` 或 `Ctrl + Shift + I`
- **macOS**: 按 `Cmd + Option + I`

#### Safari
1. 先启用开发者菜单：
   - Safari → 设置 → 高级 → 勾选"在菜单栏中显示开发菜单"
2. 按 `Cmd + Option + I`

---

### 第 3 步：切换到 Network (网络) 标签

在开发者工具中，点击 **Network** 或 **网络** 标签。

---

### 第 4 步：刷新页面并找到请求

1. **刷新页面**: 按 `F5` 或点击浏览器的刷新按钮
2. **等待加载**: 等待页面和数据完全加载
3. **过滤请求**: 在搜索框中输入 `gql_POST`
4. **找到请求**: 在请求列表中找到名为 `gql_POST` 的请求（应该只有一个或几个）
5. **点击请求**: 点击该请求查看详细信息

如果看不到请求，可能需要：
- 清空网络记录后重新刷新
- 确保 Network 标签是在刷新之前打开的

---

### 第 5 步：查看请求头 (Request Headers)

在请求详情中，找到 **Headers** 或 **请求头** 部分，向下滚动到 **Request Headers** 区域。

---

### 第 6 步：复制配置信息

现在，逐个复制以下信息：

#### ✅ 1. Cookie (必填)

**位置**: `cookie:` 这一行

**样式**:
```
cookie: p-b=Pjxkwn7YuCTZNqrUVyW6yA%3D%3D; g_state={"i_l":0,...}; _gcl_au=1.1.360444570...
```

**如何复制**:
- **Chrome/Edge**: 右键点击值 → Copy value
- **Firefox**: 双击选中整行值，然后复制
- **Safari**: 双击选中整行值，然后复制

**注意**:
- ⚠️ Cookie 值**非常长**，通常有几百到几千个字符
- ⚠️ 确保复制**完整**，不要漏掉开头或结尾
- ⚠️ Cookie 包含敏感信息，**不要分享给他人**

**粘贴位置**: 
在工具的"配置信息"表单中，粘贴到 **Cookie** 文本框（支持多行）

---

#### ✅ 2. poe-formkey (必填)

**位置**: `poe-formkey:` 这一行

**样式**:
```
poe-formkey: 7d90e4070b0c6350901db420668d6a26
```

**如何复制**:
- 复制冒号 `:` 后面的值（通常是 32 个字符的十六进制字符串）

**示例值**:
```
7d90e4070b0c6350901db420668d6a26
```

**粘贴位置**: 
在工具的"配置信息"表单中，粘贴到 **Form Key** 输入框

---

#### ✅ 3. poe-tchannel (必填)

**位置**: `poe-tchannel:` 这一行

**样式**:
```
poe-tchannel: poe-chan110-8888-npwpozikgkiyllvlxmcu
```

**如何复制**:
- 复制冒号 `:` 后面的值

**示例值**:
```
poe-chan110-8888-npwpozikgkiyllvlxmcu
```

**粘贴位置**: 
在工具的"配置信息"表单中，粘贴到 **TChannel** 输入框

---

#### ⭕ 4. poe-revision (可选)

**位置**: `poe-revision:` 这一行

**样式**:
```
poe-revision: 59988163982a4ac4be7c7e7784f006dc48cafcf5
```

**说明**:
- 这个值已经在工具中设置了默认值
- **通常不需要修改**
- 如果默认值无效，才需要从这里复制最新的值

---

#### ⭕ 5. poe-tag-id (可选)

**位置**: `poe-tag-id:` 这一行

**样式**:
```
poe-tag-id: 8a0df086c2034f5e97dcb01c426029ee
```

**说明**:
- 这个值已经在工具中设置了默认值
- **通常不需要修改**
- 如果默认值无效，才需要从这里复制最新的值

---

## ✍️ 填写示例

### 完整配置示例

```
Cookie: 
p-b=Pjxkwn7YuCTZNqrUVyW6yA%3D%3D; g_state={"i_l":0,"i_ll":1762222634209}; _gcl_au=1.1.360444570.1762222634; ...

Form Key:
7d90e4070b0c6350901db420668d6a26

TChannel:
poe-chan110-8888-npwpozikgkiyllvlxmcu

Revision:
59988163982a4ac4be7c7e7784f006dc48cafcf5

Tag ID:
8a0df086c2034f5e97dcb01c426029ee
```

---

## ⚠️ 重要提示

### 1. Cookie 会过期

- Cookie 的有效期通常是 **几天到几周**
- 过期后会提示"拉取数据失败"
- 解决方法：重新登录 Poe，然后重复上述步骤获取新的 Cookie

### 2. 安全性

- ⚠️ **不要将 Cookie 分享给任何人**
- ⚠️ Cookie 包含你的登录凭证，他人可以用它登录你的账户
- ✅ 本工具只在本地使用 Cookie，不会上传到任何服务器

### 3. 其他请求头

你可能会看到其他请求头，例如：
- `user-agent`
- `referer`
- `origin`
- 等等

**这些不需要复制**，工具已经自动处理。

---

## 🔍 常见问题

### Q: 找不到 `gql_POST` 请求？

**解决方法**:
1. 确保在刷新页面**之前**打开 Network 标签
2. 清空网络记录（垃圾桶图标）后重新刷新
3. 检查是否在正确的页面 (`https://poe.com/points_history`)

---

### Q: Cookie 太长，复制不完整？

**解决方法**:
1. 在 Chrome/Edge 中，右键点击 Cookie 值，选择 "Copy value"
2. 或者点击 `cookie:` 这一行，在右侧面板中会显示完整的值
3. Firefox 中可以在右侧的详情面板中选择和复制

---

### Q: 提示"Invalid cookie"或"Authentication failed"？

**可能原因**:
1. Cookie 复制不完整
2. Cookie 已过期
3. 复制时包含了多余的空格或换行符

**解决方法**:
1. 重新复制 Cookie，确保完整
2. 重新登录 Poe 后重试
3. 检查复制的内容，确保没有多余字符

---

### Q: 工具提示"拉取数据失败"？

**可能原因**:
1. Cookie 已过期
2. poe-formkey 或 poe-tchannel 不正确
3. 网络连接问题
4. Poe API 发生变化

**解决方法**:
1. 重新获取所有配置信息
2. 检查网络连接
3. 确认 Poe 网站是否正常访问

---

## 🎉 完成！

现在你已经成功获取了所有配置信息，可以开始使用工具拉取数据了！

**下一步**: 返回工具，点击"🚀 开始拉取数据"按钮。

---

**提示**: 建议将配置信息保存在安全的地方（如密码管理器），以便下次使用时不用重复这些步骤。但要注意，Cookie 会过期，可能需要定期更新。

